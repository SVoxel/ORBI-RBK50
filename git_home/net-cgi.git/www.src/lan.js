function dhcponoff(){var a=document.forms[0];if(a.dhcp_server.checked==true){a.sysPoolStartingAddr4.disabled=false;a.sysPoolFinishAddr4.disabled=false}else{a.sysPoolStartingAddr4.disabled=true;a.sysPoolFinishAddr4.disabled=true}}function valid_add(type){if(type){var num=eval(type+"_array_num");if(num==253){alert("$reservation_length_64");return false}location.href="reservation_add.htm#"+type}else{if(array_num==253){alert("$reservation_length_64");return false}location.href="reservation_add_wait.htm"}}function lanip_change(b){var a=new Array();b.lan_ipaddr.value=b.sysLANIPAddr1.value+"."+b.sysLANIPAddr2.value+"."+b.sysLANIPAddr3.value+"."+b.sysLANIPAddr4.value;a=b.lan_ipaddr.value.split(".");b.sysPoolStartingAddr1.value=b.sysPoolFinishAddr1.value=a[0];b.sysPoolStartingAddr2.value=b.sysPoolFinishAddr2.value=a[1];b.sysPoolStartingAddr3.value=b.sysPoolFinishAddr3.value=a[2]}function check_clientNumber(b){b.lan_subnet.value=b.sysLANSubnetMask1.value+"."+b.sysLANSubnetMask2.value+"."+b.sysLANSubnetMask3.value+"."+b.sysLANSubnetMask4.value;var h=b.lan_subnet.value;b.lan_ipaddr.value=b.sysLANIPAddr1.value+"."+b.sysLANIPAddr2.value+"."+b.sysLANIPAddr3.value+"."+b.sysLANIPAddr4.value;var c=b.lan_ipaddr.value;var l=h.split(".");var g=c.split(".");var e=parseInt(l[3],10);var j=256/(256-e);var d=255-e;var k=parseInt(g[3],10);var f=(e&k)+1;var a=(f+d)-1;if(k==(f-1)){b.lan_ipaddr.focus();return false}if(k>=(a)){b.lan_ipaddr.focus();return false}if((parseInt(b.sysPoolStartingAddr4.value,10)<f)||(parseInt(b.sysPoolStartingAddr4.value,10)>=a)){b.sysPoolStartingAddr4.focus();return false}if((parseInt(b.sysPoolFinishAddr4.value,10)<f)||(parseInt(b.sysPoolFinishAddr4.value,10)>=a)){b.sysPoolFinishAddr4.focus();return false}return true}function checklan(form){var cf=document.forms[0];var change_count=0;form.change_network_flag.value=0;form.change_network2_flag.value=0;form.change_ip_flag.value=0;form.dmz_ip.value=dmz_ip;form.bs_trustedip.value=bs_trustedip;form.dhcp_start.value=form.sysPoolStartingAddr1.value+"."+form.sysPoolStartingAddr2.value+"."+form.sysPoolStartingAddr3.value+"."+form.sysPoolStartingAddr4.value;form.dhcp_end.value=form.sysPoolFinishAddr1.value+"."+form.sysPoolFinishAddr2.value+"."+form.sysPoolFinishAddr3.value+"."+form.sysPoolFinishAddr4.value;form.lan_ipaddr.value=form.sysLANIPAddr1.value+"."+form.sysLANIPAddr2.value+"."+form.sysLANIPAddr3.value+"."+form.sysLANIPAddr4.value;form.lan_subnet.value=form.sysLANSubnetMask1.value+"."+form.sysLANSubnetMask2.value+"."+form.sysLANSubnetMask3.value+"."+form.sysLANSubnetMask4.value;var lan_array=form.lan_ipaddr.value.split(".");form.hid_array_num.value=array_num;if(checkipaddr(form.lan_ipaddr.value)==false||is_sub_or_broad(form.lan_ipaddr.value,form.lan_ipaddr.value,form.lan_subnet.value)==false){alert("$invalid_ip");return false}if(dmz_ip!=""){var dmz_array=dmz_ip.split(".");if(isSameIp(form.lan_ipaddr.value,dmz_ip)){alert("$invalid_ip");return false}}if(checksubnet(form.lan_subnet.value,0)==false){alert("$invalid_mask");return false}if(endis_wl_radio=="1"&&wds_endis_fun=="1"&&wds_repeater_basic=="0"){}else{if(form.dhcp_server.checked==true){if(checkipaddr(form.dhcp_start.value)==false){alert("$invalid_dhcp_startip");return false}form.dhcp_start.value=address_parseInt(form.dhcp_start.value);if(checkipaddr(form.dhcp_end.value)==false){alert("$invalid_dhcp_endip");return false}form.dhcp_end.value=address_parseInt(form.dhcp_end.value);if(parseInt(form.sysPoolStartingAddr4.value,10)>parseInt(form.sysPoolFinishAddr4.value,10)){alert("$invalid_dhcp_startendip");return false}if(!check_clientNumber(form)){alert("$invalid_dhcp_startendip");return false}form.lan_ipaddr.value=address_parseInt(form.lan_ipaddr.value);form.lan_subnet.value=address_parseInt(form.lan_subnet.value);if(isSameSubNet(form.lan_ipaddr.value,form.lan_subnet.value,form.dhcp_start.value,form.lan_subnet.value)==false){alert("$same_subnet_ip_dhcpstart");return false}if(isSameSubNet(form.lan_ipaddr.value,form.lan_subnet.value,form.dhcp_end.value,form.lan_subnet.value)==false){alert("$same_subnet_ip_dhcpend");return false}var out_of_range="";if(array_num>0){for(i=1;i<=array_num;i++){var start_array=form.sysPoolStartingAddr4.value;var end_array=form.sysPoolFinishAddr4.value;var str=eval("resevArray"+i);var each_info=str.split(" ");var each4=each_info[0].split(".");if((parseInt(each4[3])<parseInt(start_array))||(parseInt(each4[3])>parseInt(end_array))){if(out_of_range==""){out_of_range=i}else{out_of_range+=" "+i}}}}form.out_of_range.value=out_of_range}}if(form.dhcp_server.checked==true){form.dhcp_mode.value=1}else{form.dhcp_mode.value=0}var conflicted_with_wanip="$conflict_with_wanip";if(wan_ip!="0.0.0.0"){if(wan_type=="pppoe"||wan_type=="pptp"||wan_type=="mulpppoe1"){if(isSameSubNet(form.lan_ipaddr.value,form.lan_subnet.value,wan_ip,form.lan_subnet.value)==true){alert("$conflict_with_wanip");return false}}else{if(isSameSubNet(form.lan_ipaddr.value,form.lan_subnet.value,wan_ip,wan_mask)==true){alert("$conflict_with_wanip");return false}if(isSameSubNet(form.lan_ipaddr.value,form.lan_subnet.value,wan_ip,form.lan_subnet.value)==true){alert("$conflict_with_wanip");return false}if(isSameSubNet(form.lan_ipaddr.value,wan_mask,wan_ip,wan_mask)==true){alert("$conflict_with_wanip");return false}}if(isSameIp(wan_ip,form.lan_ipaddr.value)==true){alert("$conflict_with_wanip");return false}}if(bas_pptp_ip!="0.0.0.0"){if(wan_type=="pptp"){if(isSameSubNet(form.lan_ipaddr.value,form.lan_subnet.value,bas_pptp_ip,form.lan_subnet.value)==true){alert("$conflicted_with_wanip");return false}if(isSameIp(bas_pptp_ip,form.lan_ipaddr.value)==true){alert("$conflicted_with_wanip");return false}}}if(have_vlan_sb==1){if(check_ip_conflict(form.lan_ipaddr.value,form.lan_subnet.value,other_ipdata)==false){return false}}if(isSameIp(old_lanmask,form.lan_subnet.value)==false||isSameIp(form.dhcp_start_old.value,form.dhcp_start.value)==false||isSameIp(form.dhcp_end_old.value,form.dhcp_end.value)==false){change_count++}if(isSameIp(old_lanip,form.lan_ipaddr.value)==false){change_count++;if(isSameSubNet(form.lan_ipaddr.value,"255.255.255.0",old_lanip,"255.255.255.0")==false){new_lanip_array=form.lan_ipaddr.value.split(".");new_lansubnet_array=form.lan_subnet.value.split(".");addr1=new_lanip_array[0]&new_lansubnet_array[0];addr2=new_lanip_array[1]&new_lansubnet_array[1];addr3=new_lanip_array[2]&new_lansubnet_array[2];addr4=new_lanip_array[3]&new_lansubnet_array[3];var route_dest=addr1+"."+addr2+"."+addr3+"."+addr4;var sub_leng=3;form.net_leng.value=3;form.network.value=new_lanip_array[0]+"."+new_lanip_array[1]+"."+new_lanip_array[2];var new_reoute_dest_str=new_lanip_array[0]+"."+new_lanip_array[1]+"."+new_lanip_array[2]+".";if(dmz_ip!=""){var dmz_array=dmz_ip.split(".");if(sub_leng==1){form.dmz_ip.value=new_reoute_dest_str+dmz_array[1]+"."+dmz_array[2]+"."+dmz_array[3]}else{if(sub_leng==2){form.dmz_ip.value=new_reoute_dest_str+dmz_array[2]+"."+dmz_array[3]}else{form.dmz_ip.value=new_reoute_dest_str+dmz_array[3]}}}if(bs_trustedip!=""){var bs_trustedip_array=bs_trustedip.split(".");if(sub_leng==1){form.bs_trustedip.value=new_reoute_dest_str+bs_trustedip_array[1]+"."+bs_trustedip_array[2]+"."+bs_trustedip_array[3]}else{if(sub_leng==2){form.bs_trustedip.value=new_reoute_dest_str+bs_trustedip_array[2]+"."+bs_trustedip_array[3]}else{form.bs_trustedip.value=new_reoute_dest_str+bs_trustedip_array[3]}}}form.change_network_flag.value=1}form.change_ip_flag.value=1;top_left_nolink();top.enable_action=0}if(isSameIp(old_lanmask,form.lan_subnet.value)==false){var oldNetwork=old_lanmask.split(".");var nowNetwork=form.lan_subnet.value.split(".");oldNumofNetwork=getNumOfNetwork(oldNetwork);newNumofNetwork=getNumOfNetwork(nowNetwork);if(oldNumofNetwork<newNumofNetwork){form.change_network2_flag.value=1}}if(form.dhcp_start_old.value==form.dhcp_start.value&&form.dhcp_end_old.value==form.dhcp_end.value){form.dhcp_pool_tag.value=0}else{form.dhcp_pool_tag.value=1}if(change_count>0){alert("$change_ip_manually1")}if(have_vlan_sb==1){var vid=cf.vlan_id.value;if(check_vlan_id(vid)==false){return false}if(cf.vlan_enable.value=="disable"){cf.hid_vlan_enable.value="0"}else{cf.hid_vlan_enable.value="1"}}cf.submit();return true}function check_vlan_id(c){var a=byod_wireless_vlan_group.split(" ")[2];var b=guest_wireless_vlan_group.split(" ")[2];if(c.length==0){alert("$vlan_error1");return false}if(!_isNumeric(c)||(parseInt(c,10)<1||parseInt(c,10)>4094)){alert("$vlan_error3");return false}if(c==a||c==b){alert("The VLAN ID is duplicate, please change to another one.");return false}return true}function getNumOfNetwork(b){var a=0;a=b[0]*255*255*255;a+=b[1]*255*255;a+=b[2]*255;a+=b[3];return a}function check_lan(b,d){d.change_network_flag.value=0;d.change_network2_flag.value=0;d.change_ip_flag.value=0;d.dhcp_start.value=d.sysPoolStartingAddr1.value+"."+d.sysPoolStartingAddr2.value+"."+d.sysPoolStartingAddr3.value+"."+d.sysPoolStartingAddr4.value;d.dhcp_end.value=d.sysPoolFinishAddr1.value+"."+d.sysPoolFinishAddr2.value+"."+d.sysPoolFinishAddr3.value+"."+d.sysPoolFinishAddr4.value;d.lan_ipaddr.value=d.sysLANIPAddr1.value+"."+d.sysLANIPAddr2.value+"."+d.sysLANIPAddr3.value+"."+d.sysLANIPAddr4.value;d.lan_subnet.value=d.sysLANSubnetMask1.value+"."+d.sysLANSubnetMask2.value+"."+d.sysLANSubnetMask3.value+"."+d.sysLANSubnetMask4.value;if(checkipaddr(d.lan_ipaddr.value)==false||is_sub_or_broad(d.lan_ipaddr.value,d.lan_ipaddr.value,d.lan_subnet.value)==false){alert("$invalid_ip");return false}if(checksubnet(d.lan_subnet.value,0)==false){alert("$invalid_mask");return false}if(d.dhcp_server.checked==true){if(checkipaddr(d.dhcp_start.value)==false){alert("$invalid_dhcp_startip");return false}d.dhcp_start.value=address_parseInt(d.dhcp_start.value);if(checkipaddr(d.dhcp_end.value)==false){alert("$invalid_dhcp_endip");return false}d.dhcp_end.value=address_parseInt(d.dhcp_end.value);if(parseInt(d.sysPoolStartingAddr4.value,10)>parseInt(d.sysPoolFinishAddr4.value,10)){alert("$invalid_dhcp_startendip");return false}if(!check_clientNumber(d)){alert("$invalid_dhcp_startendip");return false}d.lan_ipaddr.value=address_parseInt(d.lan_ipaddr.value);d.lan_subnet.value=address_parseInt(d.lan_subnet.value);if(isSameSubNet(d.lan_ipaddr.value,d.lan_subnet.value,d.dhcp_start.value,d.lan_subnet.value)==false){alert("$same_subnet_ip_dhcpstart");return false}if(isSameSubNet(d.lan_ipaddr.value,d.lan_subnet.value,d.dhcp_end.value,d.lan_subnet.value)==false){alert("$same_subnet_ip_dhcpend");return false}}if(d.dhcp_server.checked==true){d.dhcp_mode.value=1}else{d.dhcp_mode.value=0}if(wan_ip!="0.0.0.0"){if(wan_type=="pppoe"||wan_type=="pptp"||wan_type=="mulpppoe1"){if(isSameSubNet(d.lan_ipaddr.value,d.lan_subnet.value,wan_ip,d.lan_subnet.value)==true){alert("$conflict_with_wanip");return false}}else{if(isSameSubNet(d.lan_ipaddr.value,d.lan_subnet.value,wan_ip,wan_mask)==true){alert("$conflict_with_wanip");return false}if(isSameSubNet(d.lan_ipaddr.value,d.lan_subnet.value,wan_ip,d.lan_subnet.value)==true){alert("$conflict_with_wanip");return false}if(isSameSubNet(d.lan_ipaddr.value,wan_mask,wan_ip,wan_mask)==true){alert("$conflict_with_wanip");return false}}if(isSameIp(wan_ip,d.lan_ipaddr.value)==true){alert("$conflict_with_wanip");return false}}if(bas_pptp_ip!="0.0.0.0"){if(wan_type=="pptp"){if(isSameSubNet(d.lan_ipaddr.value,d.lan_subnet.value,bas_pptp_ip,d.lan_subnet.value)==true){alert("$conflicted_with_wanip");return false}if(isSameIp(bas_pptp_ip,d.lan_ipaddr.value)==true){alert("$conflicted_with_wanip");return false}}}if(isSameIp(old_lanip,d.lan_ipaddr.value)==false){if(isSameSubNet(d.lan_ipaddr.value,"255.255.255.0",old_lanip,"255.255.255.0")==false){new_lanip_array=d.lan_ipaddr.value.split(".");d.net_leng.value=3;d.network.value=new_lanip_array[0]+"."+new_lanip_array[1]+"."+new_lanip_array[2];d.change_network_flag.value=1}d.change_ip_flag.value=1}if(isSameIp(old_lanmask,d.lan_subnet.value)==false){var a=old_lanmask.split(".");var c=d.lan_subnet.value.split(".");oldNumofNetwork=getNumOfNetwork(a);newNumofNetwork=getNumOfNetwork(c);if(oldNumofNetwork<newNumofNetwork){d.change_network2_flag.value=1}}if(check_ip_conflict(d.lan_ipaddr.value,d.lan_subnet.value,other_ipdata)==false){return false}return true}function enabled_input_elements(a){var c=document.getElementById(a);var d=c.childNodes;for(var b=0;b<d.length;b++){d[b].disabled=false}}function getkey1(c){var a,b;if(window.event){b=window.event;a=window.event.keyCode}else{if(c){b=c;a=c.which}else{return true}}if(((a>47)&&(a<58))||(a==8)||(a==0)||(a==46)){return true}else{return false}}function ap_show(a){cf=document.forms[0];if(a==0){document.getElementById("iptab").style.display="none"}else{if(a==1){document.getElementById("iptab").style.display=""}}}function check_ap(a,b){b.hid_ap_ipaddr.value=b.APaddr1.value;b.hid_ap_subnet.value=b.APmask1.value;b.hid_ap_gateway.value=b.APgateway1.value;b.ap_dnsaddr1.value=b.APDAddr1.value;b.ap_dnsaddr2.value=b.APPDAddr1.value;if(b.dyn_get_ip[1].checked==true){if(check_static_ip_mask_gtw()==false){return false}if(check_static_dns(!(b.dyn_get_ip.checked))==false){return false}b.hid_dyn_get_ip.value="0"}else{b.hid_dyn_get_ip.value="1"}return true}function check_static_ip_mask_gtw(){var a=document.forms[0];a.hid_ap_ipaddr.value=a.APaddr1.value;a.hid_ap_subnet.value=a.APmask1.value;a.hid_ap_gateway.value=a.APgateway1.value;if(checkipaddr(a.hid_ap_ipaddr.value)==false||is_sub_or_broad(a.hid_ap_ipaddr.value,a.hid_ap_ipaddr.value,a.hid_ap_subnet.value)==false){alert("$invalid_ip");return false}if(checksubnet(a.hid_ap_subnet.value,0)==false){alert("$invalid_mask");return false}if(checkgateway(a.hid_ap_gateway.value)==false||is_sub_or_broad(a.hid_ap_gateway.value,a.hid_ap_gateway.value,a.hid_ap_subnet.value)==false){alert("$invalid_gateway");return false}if(isGateway(a.hid_ap_ipaddr.value,a.hid_ap_subnet.value,a.hid_ap_gateway.value)==false){alert("$invalid_gateway");return false}if(isSameIp(a.hid_ap_ipaddr.value,a.hid_ap_gateway.value)==true){alert("$invalid_gateway");return false}if(isSameSubNet(a.hid_ap_ipaddr.value,a.hid_ap_subnet.value,a.hid_ap_gateway.value,a.hid_ap_subnet.value)==false){alert("$same_subnet_ip_gtw");return false}return true}function check_static_dns(b){var a=document.forms[0];a.ap_dnsaddr1.value=a.APDAddr1.value;a.ap_dnsaddr2.value=a.APPDAddr1.value;a.hid_ap_ipaddr.value=a.APaddr1.value;if(a.ap_dnsaddr1.value=="..."){a.ap_dnsaddr1.value=""}if(a.ap_dnsaddr2.value=="..."){a.ap_dnsaddr2.value=""}if(check_DNS(a.ap_dnsaddr1.value,a.ap_dnsaddr2.value,b,a.hid_ap_ipaddr.value)){return true}else{return false}}function check_ip_conflict(d,a,c){for(var b=0;b<c.length;b++){if(isSameIp(d,c[b].ip)==true){alert("IP address is conflicted with "+c[b].type+" IP subnet, please enter again.");return false}if(isSameSubNet(d,a,c[b].ip,c[b].mask)==true){alert("IP address is conflicted with "+c[b].type+" IP subnet, please enter again.");return false}}return true};