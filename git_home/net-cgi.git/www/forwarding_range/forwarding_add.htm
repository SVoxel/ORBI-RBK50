<% http_header("style/form.css", "/funcs.js", "/forwarding.js") %>
<% body_header("_FW_forward_range", "forwarding.htm", "forwarding_add_range") %>
<div class="page_title">$forward_head</div>
<div class="fix_button">
<TABLE width=100% border=0 cellpadding=0 cellspacing=2>
<script>
var master="<% cfg_get("http_loginname") %>";
if( master == "admin" )
    document.write('<TR><TD nowrap colspan=2 align=center><input class="cancel_bt" type="button" name="Cancel" id="cancel" value="$cancel_mark" onClick="location.href=\'forwarding.htm\';">&nbsp;&nbsp;<input class="apply_bt" type="button" name="Apply" id="apply" value="$apply_mark" onClick="return check_forwarding_add_range(document.forms[0],\'add\')"></TD></TR>');
else
	document.write('<TR><TD nowrap colspan=2 align=center><input class="cancel1_bt" type="button" name="Cancel" id="cancel" value="$cancel_mark" disabled>&nbsp;&nbsp;<input class="apply1_bt" type="button" name="Apply" id="apply" value="$apply_mark" disabled></TD></TR>');
</script>
</TABLE>

</div>
<div id="main" class="main_top_button"> 
<% table_header() %>

<script>
function loadvalue()
{
	portrange_value();
	show_devices();
}
function portrange_value()
{
	var cf=document.forms[0];
	if(cf.same_range.checked == true){
		cf.internal_port.disabled= true;
		cf.internal_port.value=cf.exter_port.value;
		getObj('forward_inter_port').color = 'gray';
		getObj('hint_message1').color = 'gray';
	}
	else{
		cf.internal_port.disabled= false;
		getObj('forward_inter_port').color = 'black';
		getObj('hint_message1').color = 'black';
	}
}

<% forward_items_xss() %>
<% trigger_items_xss() %>
<% upnp_items() %>
var vpn_type="<% cfg_get("vpn_serv_type") %>";
var vpn_port="<% cfg_get("vpn_serv_port") %>";
var vpn_tun_type="<% cfg_get("tun_vpn_serv_type") %>";
var vpn_tun_port="<% cfg_get("tun_vpn_serv_port") %>";
<% check_ftp() %>
var show_enableHTTP="<% cfg_get("usb_enableHTTP") %>";
var show_enableHvia="<% cfg_get("usb_enableHvia") %>";
var show_HTTP_via_port="<% cfg_get("usb_HTTP_via_port") %>";
var show_enableFTP="<% cfg_get("usb_enableFTP") %>";
var show_enableFvia="<% cfg_get("usb_enableFvia") %>";
var show_FTP_via_port="<% cfg_get("usb_FTP_via_port") %>";
var usb_router_flag=parent.usb_router_flag;

var attach_ip_array = new Array();
var attach_mac_array = new Array();
var attach_name_array = new Array();
var i=0;
var len;
</script>

<input type="hidden" name="serflag">
<input type="hidden" name="service_ip">
<input type="hidden" name="hidden_portname">
<input type="hidden" name="hidden_port_range">
<input type="hidden" name="hidden_port_int_start">
<input type="hidden" name="hidden_port_int_end">
<input type="hidden" name="port_start">
<input type="hidden" name="port_end">

<TR>
	<TD nowrap>$forward_service_name</TD>
	<TD nowrap>
	<input type="text" name="portname" id="port_name" size="20" maxlength="30">
	</TD>
</TR>
<TR>
	<TD nowrap>$block_ser_setup_pro</TD>
	<TD nowrap> 
	<select NAME="srvtype" id="srvtype" size="1" >
		<option value="TCP/UDP" selected>$block_ser_setup_tcp_udp</option>
		<option value="TCP">$block_ser_setup_tcp</option>
		<option value="UDP">$block_ser_setup_udp</option>
	</select>
	</TD>
</TR>
<TR>
	<TD nowrap>$ports_external_range</TD>
	<TD nowrap>
	<input type="text" name="exter_port" id="exter_port" size="20" maxlength="256" onMouseOut="int_port_value()" onKeyUp="int_port_value()">
	</TD>
</TR>
<TR><TD nowrap colspan=2>$ports_range_description</TD></TR>
<TR>
	<TD nowrap>
	<input type="checkbox" name="same_range" id="same_range" value="same_range" checked onClick="portrange_value()">$forward_same_port_range
	</TD>
</TR>
<TR id="forward_inter_port" >
	<TD nowrap>$ports_internal_range</TD>
	<TD  nowrap>
	<input id="internal_port" type="text" name="internal_port" size="20" maxlength="256" disabled="disabled">
	</TD>
</TR>
<TR id="hint_message1"><TD nowrap colspan=2>$ports_range_description</TD></TR>
<TR>
	<TD nowrap>$forward_internal_ip_addr</TD>
	<TD nowrap>
	<input type="text" name="server_ip1" id="lan_ip1" size="3" autocomplete="off" maxlength="3" onFocus="this.select();" onkeydown="keydown(event,this);" onKeyPress="return getkey('num',event);" onkeyup="keyup(event,this);">.
	<input type="text" name="server_ip2" id="lan_ip2" size="3" autocomplete="off" maxlength="3" onFocus="this.select();" onkeydown="keydown(event,this);" onKeyPress="return getkey('num',event);" onkeyup="keyup(event,this);">.
	<input type="text" name="server_ip3" id="lan_ip3" size="3" autocomplete="off" maxlength="3" onFocus="this.select();" onkeydown="keydown(event,this);" onKeyPress="return getkey('num',event);" onkeyup="keyup(event,this);">.
	<input type="text" name="server_ip4" id="lan_ip4" size="3" autocomplete="off" maxlength="3" onFocus="this.select();" onkeydown="keydown(event,this);" onKeyPress="return getkey('num',event);" onkeyup="keyup(event,this);">
	</TD>
</TR>
<TR>
<TD></TD>
<TD nowrap><B>$forward_or</B> $forward_select_attach_device</TD>
</TR>
<TR>
<TD></TD>
<TD nowrap colspan=2><div id=devices></div>
</TD>
</TR>
$bluebar
</TABLE>
<script>
var lan_ip="<% cfg_get("lan_ipaddr") %>";
var lan_subnet="<% cfg_get("lan_netmask") %>";
var remote_port="<% cfg_get("remote_port") %>";
var endis_ntp="<% cfg_get("endis_ntp") %>";
var endis_upnp="<% cfg_get("upnp_enable") %>";
var info_get_wanproto="<% cfg_get("wan_proto") %>";
var lanip_array = lan_ip.split(".");
var endis_remote="<% cfg_get("remote_endis") %>";
cf=document.forms[0];
cf.server_ip1.value=lanip_array[0];
cf.server_ip2.value=lanip_array[1];
cf.server_ip3.value=lanip_array[2];
</script>

</div>
<% help_box("1","_FW_forward_range") %>
</FORM>
</BODY>
</HTML>
