function check_qos_mac(a){var d=document.forms[0];var c=0;if(a=="edit"||a=="delete"){var b;if(qos_mac_num==1){if(d.qos_mac_select.checked==true){c=1}}else{for(b=1;b<=qos_mac_num;b++){if(d.qos_mac_select[b-1].checked==true){c=b}}}}if(c==0&&a!="add"){if(a=="edit"){alert("$port_edit")}else{if(a=="delete"){alert("$port_del")}}return false}if(a=="add"){if(qos_mac_num>=8){return false}d.plc_qos_mac_flag.value="add";d.plc_qos_mac_select.value=c;d.submit_flag.value="plc_qos_dev_mac_config";d.action="/apply.cgi?/PLC_qos_mac.htm timestamp="+ts}else{if(a=="edit"){d.plc_qos_mac_flag.value="edit";d.plc_qos_mac_select.value=c;d.submit_flag.value="plc_qos_dev_mac_config";d.action="/apply.cgi?/PLC_qos_mac.htm timestamp="+ts}else{if(a=="delete"){d.plc_qos_mac_select.value=c;d.submit_flag.value="plc_qos_dev_mac_delete";d.action="/apply.cgi?/PLC_dev_configure.htm timestamp="+ts}}}return true}function check_qos_port(a){var d=document.forms[0];var c=0;if(a=="edit"||a=="delete"){var b;if(qos_port_num==1){if(d.qos_port_select.checked==true){c=1}}else{for(b=1;b<=qos_port_num;b++){if(d.qos_port_select[b-1].checked==true){c=b}}}}if(c==0&&a!="add"){if(a=="edit"){alert("$port_edit")}else{if(a=="delete"){alert("$port_del")}}return false}if(a=="add"){if(qos_port_num>=8){return false}d.plc_qos_port_flag.value="add";d.plc_qos_port_select.value=c;d.submit_flag.value="plc_qos_dev_port_config";d.action="/apply.cgi?/PLC_qos_port.htm timestamp="+ts}else{if(a=="edit"){d.plc_qos_port_flag.value="edit";d.plc_qos_port_select.value=c;d.submit_flag.value="plc_qos_dev_port_config";d.action="/apply.cgi?/PLC_qos_port.htm timestamp="+ts}else{if(a=="delete"){d.plc_qos_port_select.value=c;d.submit_flag.value="plc_qos_dev_port_delete";d.action="/apply.cgi?/PLC_dev_configure.htm timestamp="+ts}}}return true}function check_DAK_status(){var a;var b=document.forms[0];if(plc_avail_dev_num==1){b.DAK.disabled=true}else{if(plc_avail_dev_num>1){for(a=0;a<plc_avail_dev_num;a++){if(b.DAK[a].readOnly!=true){if(b.select_dev[a].checked==true){b.DAK[a].disabled=false}if(b.select_dev[a].checked==false){b.DAK[a].disabled=true}}else{b.DAK[a].disabled=true}}}}return true}function create_default_NMK(){var a=document.forms[0];a.NMK.value="HomePlugAV";a.NMK.focus();a.NMK.select()}function check_DAK_value(d,a){if(d.indexOf("-")==-1){var c=a.split("-");var b=c[0]+c[1]+c[2]+c[3];if(d!=b){return false}}else{if(d!=a){return false}}return true}function plc_device_config(f){var e;f.NMK.value=remove_space(f.NMK.value);if(f.NMK.value==""){alert("$plc_encryp_key_error");return false}else{if((f.NMK.value.length<8)||(f.NMK.value.length>64)){alert("$plc_encryp_key_error");return false}for(e=0;e<f.NMK.value.length;e++){if(isValidNumLetter(f.NMK.value.charCodeAt(e))==false){alert("$plc_encryp_key_error");return false}}}if(plc_avail_dev_num==1){if(f.select_dev.checked==false){alert("$plc_dev_select");return false}else{f.DAK.value=devices_set[1].DAK_passwd}}else{if(plc_avail_dev_num>1){var c=0;for(e=0;e<plc_avail_dev_num;e++){if(f.select_dev[e].checked==true){c=c+1;if(f.DAK[e].value==""){alert("$password_error");f.DAK[e].focus();return false}if(f.DAK[e].readOnly!=true){var b;for(b=0;b<f.DAK[e].value.length;b++){if(isValidDdnsHost(f.DAK[e].value.charCodeAt(b))==false){alert("$password_error");f.DAK[e].value="";f.DAK[e].focus();return false}}if(check_DAK_value(f.DAK[e].value,devices_set[e+1].DAK_passwd)==false){alert("$password_error");f.DAK[e].value="";f.DAK[e].focus();return false}}}}if(c==0){alert("$plc_dev_select");return false}for(e=0;e<plc_avail_dev_num;e++){if(f.select_dev[e].checked==true){f.DAK[e].value=devices_set[e+1].DAK_passwd}}}}f.plc_dev_cfg_info.value="";f.plc_dev_select_num.value="";var a="";var d=0;if(plc_avail_dev_num==1){if(f.select_dev.checked==true){a=devices_set[1].Dev_type+"-"+f.NMK.value+"-"+f.DAK.value+"#"+devices_set[1].MAC}f.plc_dev_cfg_info.value=f.plc_dev_cfg_info.value+a+"*";d=1}else{if(plc_avail_dev_num>1){for(e=1;e<=plc_avail_dev_num;e++){if(f.select_dev[e-1].checked==true){a=devices_set[e].Dev_type+"-"+f.NMK.value+"-"+f.DAK[e-1].value+"#"+devices_set[e].MAC;d=d+1;f.plc_dev_cfg_info.value=f.plc_dev_cfg_info.value+a+"*"}}}}f.plc_dev_select_num.value=d.toString();return true}function plc_qos_config(cf){var i,each_info,mac_info;cf.plc_dev_cfg_mac.value="";if(plc_avail_dev_num==1){var str=eval("avail_dev_Array"+1);str=str.replace(/\s+/g," ");var each_info=str.split(" ");if(cf.select_dev.checked==true){cf.plc_dev_cfg_mac.value=cf.plc_dev_cfg_mac.value+each_info[1]+"-"}}else{if(plc_avail_dev_num>1){for(i=1;i<=plc_avail_dev_num;i++){var str=eval("avail_dev_Array"+i);str=str.replace(/\s+/g," ");var each_info=str.split(" ");if(cf.select_dev[i-1].checked==true){cf.plc_dev_cfg_mac.value=cf.plc_dev_cfg_mac.value+each_info[1]+"-"}}}}mac_info=cf.plc_dev_cfg_mac.value;if(mac_info!=""){cf.plc_dev_cfg_mac.value=mac_info.substring(0,mac_info.length-1)}cf.submit_flag.value="plc_qos_setting";cf.action="/apply.cgi?/PLC_wait_scan.htm timestamp="+ts;return true};